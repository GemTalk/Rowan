#! /usr/bin/env bash
#=========================================================================
# Copyright (c) 2018 GemTalk Systems, LLC <dhenrich@gemtalksystems.com>.
#
#   MIT license: https://github.com/dalehenrich/Rowan/blob/master/LICENSE
#=========================================================================

set -e 

rowan_tag="$1"
jadeite_tag="$2"

#
# 1. clone the Rowan, Jade (Jadeite), RowanSample1, and RowanSample2 projects
# 2. confirm that the master branches of Rowan and Jade are on the correct tag
# 3. Create Jadeite runtime directory (Jadeite_runtime)
# 4. create manifest.txt and list the sha of the commit for each of the git 
#    projects along with the name of the file or directory
# 5. zip up the Rowan, RowanSample1, and RowanSample2 projects, the 
#    Jadeite_runtime directory  plus any .pdf documents preset (expect at 
#    least one PDF file)
#
commit_match_tag() {
  git describe --match "$1" HEAD
}

cd $ROWAN_PROJECTS_HOME/Rowan/staging

#rm -rf Rowan Jade RowanSample1 RowanSample2 manifest.txt
#
#git clone git@github.com:dalehenrich/Rowan.git
#git clone git@github.com:ericwinger/Jade.git
#git clone git@github.com:dalehenrich/RowanSample1.git
#git clone git@github.com:dalehenrich/RowanSample2.git

rm -rf Rowan
git clone git@github.com:dalehenrich/Rowan.git
cd Rowan
git checkout master
commit_match_tag "v0.0.2-alpha"


